# Created by Parker Coates <parker.coates@kdemail.net>
# Updated by Nicol√°s Alvarez <nicolas.alvarez@gmail.com>
#
# Kollision is a new-ish application, so run svn2git with the following option:
#    --resume-from=653928
#
# These rules are 100% copied from killbots-rules, so if you find a mistake here,
# please also fix it there.

# Create the kollision repository
create repository kollision
end repository

# Set the REPO and MODULE variables, used by some included rules
declare REPO=kollision
declare MODULE=kdegames/kollision

# Ignore some things that are known to cause trouble
include ../common-kde-ignores

# 770542 copied the docs from koll/doc to doc/koll,
# then 770543 deleted the docs from koll/doc.
# Our rules export both paths to the same place,
# so we end up with 770543 deleting the docs.
# Let's ignore the deletion commit.
match /trunk/playground/games/kollision/doc/
    min revision 770543
    max revision 770543
    action ignore
end match

# Get sources and docs from playground
match /trunk/playground/games/kollision/
    repository kollision
    branch master
end match
match /trunk/playground/games/doc/kollision/
    repository kollision
    branch master
    prefix doc/
end match

# Get sources and docs from kdereview
match /trunk/kdereview/kollision/
    repository kollision
    branch master
end match
match /trunk/kdereview/doc/kollision/
    repository kollision
    branch master
    prefix doc/
end match

# Get sources and docs from the kdegames module
match /trunk/KDE/kdegames/kollision/
    repository kollision
    branch master
end match
match /trunk/KDE/kdegames/doc/kollision/
    repository kollision
    branch master
    prefix doc/
end match

# Export the kollision-qgv work branch.
# The merge back to trunk is handled automatically by svn2git.
match /branches/work/kollision-qgv/
    repository kollision
    branch kollision-qgv
end match

# Recurse into branch and tag changes that may have affected us
match /(branches|tags)/KDE/\d+[^/]+/(kdegames/)?$
  action recurse
end match

# Get sources and docs from branches
match /branches/KDE/(\d+)\.(\d+)/kdegames/kollision/
    repository kollision
    branch KDE/\1.\2
end match
match /branches/KDE/(\d+)\.(\d+)/kdegames/doc/kollision/
    repository kollision
    branch KDE/\1.\2
    prefix doc/
end match

# Get tags
match /tags/KDE/(\d+)\.(\d+)/kdegames/kollision/
    repository kollision
    branch refs/tags/v\1.\2.0
    annotated true
end match
match /tags/KDE/(\d+)\.(\d+)\.(\d+)/kdegames/kollision/
    repository kollision
    branch refs/tags/v\1.\2.\3
    annotated true
end match

# Some tag stuff
include ../common-kde-tags-rules

# Ignore everything else
match /
end match
